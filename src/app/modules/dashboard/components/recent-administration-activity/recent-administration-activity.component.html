<div class="activity-container">
    <div class="activity-header">
        <h2>{{ isSuperAdmin ? 'Establishment Ranking by Active Users' : 'Class Ranking by Presence' }}</h2>
    </div>

    <div *ngIf="loading" class="loading-spinner">
        Loading...
    </div>

    <div class="activity-table" *ngIf="!loading">
        <!-- Affichage pour SuperAdmin (Ã©tablissements) -->
        <div *ngIf="isSuperAdmin">
            <div class="activity-item" *ngFor="let establishment of establishments">
                <div class="user-info">
                    <div class="avatar-placeholder">
                        {{ establishment.nom.charAt(0) }}
                    </div>
                    <span class="name">{{ establishment.nom }}</span>
                </div>

                <div class="id">
                    ID {{ establishment.id | slice:0:8 }}
                </div>

                <div class="class-info">
                    <span class="class-label">Active Users</span>
                    <span class="class-value">{{ establishment.nombreUtilisateursActuels }}</span>
                </div>

                <div class="amount">
                    Max: {{ establishment.nombreUtilisateursActuels }}
                </div>

                <div class="actions">
                    <button class="btn-more">
                        <i class="feather-more-horizontal"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Affichage pour non-SuperAdmin (classes) -->
        <div *ngIf="!isSuperAdmin">
            <div class="activity-item" *ngFor="let class of classes">
                <div class="user-info">
                    <div class="avatar-placeholder">
                        {{ class.className.charAt(0) }}
                    </div>
                    <span class="name">{{ class.className }}</span>
                </div>

                <div class="id">
                    ID {{ class.classId | slice:0:8 }}
                </div>

                <div class="class-info">
                    <span class="class-label">Students</span>
                    <span class="class-value">{{ class.studentCount }}</span>
                </div>

                <div class="amount">
                    {{ getPresenceRatePercentage(class.presenceRate) }}
                </div>

                <div class="actions">
                    <button class="btn-more">
                        <i class="feather-more-horizontal"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="no-data" *ngIf="!loading && ((isSuperAdmin && establishments.length === 0) || (!isSuperAdmin && classes.length === 0))">
        No data available
    </div>
</div>








<!--<div class="activity-container">-->
<!--    <div class="activity-header">-->
<!--        <h2>Class Ranking by Presence</h2>-->
<!--    </div>-->

<!--    <div class="activity-table">-->
<!--        <div class="activity-item" *ngFor="let class of classes">-->
<!--            <div class="user-info">-->
<!--                <div class="avatar-placeholder">-->
<!--                    {{ class.className.charAt(0) }}-->
<!--                </div>-->
<!--                <span class="name">{{ class.className }}</span>-->
<!--            </div>-->

<!--            <div class="id">-->
<!--                ID {{ class.classId | slice:0:8 }}-->
<!--            </div>-->

<!--            <div class="class-info">-->
<!--                <span class="class-label">Students</span>-->
<!--                <span class="class-value">{{ class.studentCount }}</span>-->
<!--            </div>-->

<!--            <div class="amount">-->
<!--                {{ getPresenceRatePercentage(class.presenceRate) }}-->
<!--            </div>-->

<!--            <div class="actions">-->
<!--                <button class="btn-more">-->
<!--                    <i class="feather-more-horizontal"></i>-->
<!--                </button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
