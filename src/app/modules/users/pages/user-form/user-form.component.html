<app-layout>
    <div class="user-form-container">
        <app-navbar
                pageTitle="New User">
        </app-navbar>

        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
            <!-- Personal Details Section -->
            <div class="form-section">
                <h2 class="section-title">Personnal Details</h2>

                <div class="form-grid">
                    <!-- Photo Upload -->
                    <div class="form-group photo-upload">
                        <label for="photo">Photo <span class="required">*</span></label>
                        <div class="photo-upload-area" (click)="fileInput.click()">
                            <input
                                    type="file"
                                    id="photo"
                                    hidden
                                    #fileInput
                                    (change)="onFileSelected($event)"
                                    accept="image/*"
                            >
                            <div class="upload-placeholder">
                                <p>Drag and drop or</p>
                                <p>click here to select file</p>
                            </div>
                        </div>
                    </div>

                    <!-- First Name -->
                    <div class="form-group">
                        <label for="firstName">First Name <span class="required">*</span></label>
                        <input
                                type="text"
                                id="firstName"
                                formControlName="firstName"
                                placeholder="Samantha"
                                [ngClass]="{'invalid': userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched}"
                        >
                    </div>

                    <!-- Last Name -->
                    <div class="form-group">
                        <label for="lastName">Last Name <span class="required">*</span></label>
                        <input
                                type="text"
                                id="lastName"
                                formControlName="lastName"
                                placeholder="William"
                                [ngClass]="{'invalid': userForm.get('lastName')?.invalid && userForm.get('lastName')?.touched}"
                        >
                    </div>

                    <!-- Date of Birth -->
                    <div class="form-group">
                        <label for="dateOfBirth">Date & Place of Birth <span class="required">*</span></label>
                        <input
                                type="text"
                                id="dateOfBirth"
                                formControlName="dateOfBirth"
                                placeholder="24 Februari 1997"
                                [ngClass]="{'invalid': userForm.get('dateOfBirth')?.invalid && userForm.get('dateOfBirth')?.touched}"
                        >
                    </div>

                    <!-- Place of Birth -->
                    <div class="form-group">
                        <input
                                type="text"
                                id="placeOfBirth"
                                formControlName="placeOfBirth"
                                placeholder="Jakarta"
                                [ngClass]="{'invalid': userForm.get('placeOfBirth')?.invalid && userForm.get('placeOfBirth')?.touched}"
                        >
                    </div>

                    <!-- Role -->
                    <div class="form-group">
                        <label for="role">Role <span class="required">*</span></label>
                        <div class="select-container">
                            <select
                                    id="role"
                                    formControlName="role"
                                    [ngClass]="{'invalid': userForm.get('role')?.invalid && userForm.get('role')?.touched}"
                            >
                                <option value="" disabled selected>Select the user role in the mobile app</option>
                                <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
                            </select>
                            <div class="select-arrow"></div>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                        <label for="email">Email <span class="required">*</span></label>
                        <input
                                type="email"
                                id="email"
                                formControlName="email"
                                placeholder="william@gmail.com"
                                [ngClass]="{'invalid': userForm.get('email')?.invalid && userForm.get('email')?.touched}"
                        >
                    </div>

                    <!-- Phone -->
                    <div class="form-group">
                        <label for="phone">Phone <span class="required">*</span></label>
                        <input
                                type="tel"
                                id="phone"
                                formControlName="phone"
                                placeholder="+1234567890"
                                [ngClass]="{'invalid': userForm.get('phone')?.invalid && userForm.get('phone')?.touched}"
                        >
                    </div>

                    <!-- Address -->
                    <div class="form-group full-width">
                        <label for="address">Address <span class="required">*</span></label>
                        <textarea
                                id="address"
                                formControlName="address"
                                placeholder="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."
                                [ngClass]="{'invalid': userForm.get('address')?.invalid && userForm.get('address')?.touched}"
                        ></textarea>
                        <div class="char-count">0/1000</div>
                    </div>

                    <!-- Service -->
                    <div class="form-group">
                        <label for="service">Service <span class="required">*</span></label>
                        <div class="select-container">
                            <select
                                    id="service"
                                    formControlName="service"
                                    [ngClass]="{'invalid': userForm.get('service')?.invalid && userForm.get('service')?.touched}"
                            >
                                <option value="" disabled selected>Select the right Service of user</option>
                                <option value="service1">Service 1</option>
                                <option value="service2">Service 2</option>
                                <option value="service3">Service 3</option>
                            </select>
                            <div class="select-arrow"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Account Credentials Section -->
            <div class="form-section">
                <h2 class="section-title">Account credentials</h2>

                <div class="form-grid">
                    <!-- Password -->
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input
                                type="password"
                                id="password"
                                formControlName="password"
                                placeholder="******"
                                [ngClass]="{'invalid': userForm.get('password')?.invalid && userForm.get('password')?.touched}"
                        >
                    </div>

                    <!-- Confirm Password -->
                    <div class="form-group">
                        <label for="confirmPassword">Confirm password</label>
                        <input
                                type="password"
                                id="confirmPassword"
                                formControlName="confirmPassword"
                                placeholder="******"
                                [ngClass]="{'invalid': (userForm.hasError('passwordMismatch') || userForm.get('confirmPassword')?.invalid) && userForm.get('confirmPassword')?.touched}"
                        >
                        <div class="error-message" *ngIf="userForm.hasError('passwordMismatch') && userForm.get('confirmPassword')?.touched">
                            Passwords do not match
                        </div>
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-cancel" (click)="onCancel()">Cancel</button>
                <button type="submit" class="btn btn-submit" [disabled]="userForm.invalid">Submit</button>
            </div>
        </form>
    </div>
</app-layout>