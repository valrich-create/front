<app-layout>
    <div class="container-fluid p-0">
        <app-navbar
                pageTitle="User Details">
        </app-navbar>

        <div class="container py-4">
            <div class="row">
                <!-- Colonne principale (3/4 de l'espace) -->
                <div class="col-lg-9 col-md-8 mb-4">
                    <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <!-- En-tête avec boutons -->
                            <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between mb-4">
                                <div class="d-flex align-items-center">
                                    <div class="avatar me-3">
                                        <span class="initials">{{getInitials(user?.firstName + ' ' + user?.lastName)}}</span>
                                    </div>
                                    <div>
                                        <h2 class="mb-1">{{user?.firstName}} {{user?.lastName}}</h2>
                                        <p class="text-muted mb-0">{{user?.role}} • {{user?.classeServiceNom || 'Non spécifié'}}</p>
                                    </div>
                                </div>
                                <div class="mt-2 mt-md-0">
                                    <button class="btn btn-primary me-2" (click)="editUser()">
                                        <i class="bi bi-pencil-square me-1"></i> Modifier
                                    </button>
                                    <button class="btn btn-outline-danger" (click)="deleteUser()">
                                        <i class="bi bi-trash me-1"></i> Supprimer
                                    </button>
                                </div>
                            </div>

                            <!-- Informations de contact -->
                            <div class="row mb-4">
                                <div class="col-md-6 mb-3">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <h5 class="card-title">Informations de contact</h5>
                                            <ul class="list-unstyled">
                                                <li class="mb-2" *ngIf="user?.phoneNumber">
                                                    <i class="bi bi-telephone-fill text-primary me-2"></i>
                                                    {{user?.phoneNumber}}
                                                </li>
                                                <li class="mb-2" *ngIf="user?.email">
                                                    <i class="bi bi-envelope-fill text-primary me-2"></i>
                                                    {{user?.email}}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <h5 class="card-title">Informations générales</h5>
                                            <ul class="list-unstyled">
                                                <li class="mb-2" *ngIf="user?.establishmentName">
                                                    <i class="bi bi-building text-primary me-2"></i>
                                                    <strong>Établissement:</strong> {{user?.establishmentName}}
                                                </li>
                                                <li class="mb-2" *ngIf="user?.createdAt">
                                                    <i class="bi bi-calendar-plus text-primary me-2"></i>
                                                    <strong>Date création:</strong> {{user?.createdAt | date:'mediumDate'}}
                                                </li>
                                                <li class="mb-2" *ngIf="user?.lastAccess">
                                                    <i class="bi bi-clock-history text-primary me-2"></i>
                                                    <strong>Dernier accès:</strong> {{user?.lastAccess | date:'mediumDate'}}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Section À propos -->
<!--                            <div class="card mb-4" *ngIf="user?.bio">-->
<!--                                <div class="card-body">-->
<!--                                    <h5 class="card-title">À propos</h5>-->
<!--                                    <p class="card-text">-->
<!--                                        {{user?.bio}}-->
<!--                                    </p>-->
<!--                                </div>-->
<!--                            </div>-->

                            <!-- Éducation et Expertise -->
<!--                            <div class="row">-->
<!--                                <div class="col-md-6 mb-3 mb-md-0" *ngIf="user?.education?.length">-->
<!--                                    <div class="card h-100">-->
<!--                                        <div class="card-body">-->
<!--                                            <h5 class="card-title">Formation</h5>-->
<!--                                            <ul class="list-unstyled">-->
<!--                                                <li class="mb-3" *ngFor="let edu of user?.education">-->
<!--                                                    <h6 class="mb-1">{{edu.degree}}</h6>-->
<!--                                                    <p class="text-muted mb-0">{{edu.institution}} ({{edu.yearFrom}} - {{edu.yearTo}})</p>-->
<!--                                                </li>-->
<!--                                            </ul>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="col-md-6" *ngIf="user?.expertise?.length">-->
<!--                                    <div class="card h-100">-->
<!--                                        <div class="card-body">-->
<!--                                            <h5 class="card-title">Expertise</h5>-->
<!--                                            <div class="d-flex flex-wrap gap-2">-->
<!--                                                <span class="badge bg-primary" *ngFor="let skill of user?.expertise">-->
<!--                                                    {{skill}}-->
<!--                                                </span>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
                        </div>
                    </div>
                </div>

                <!-- Colonne secondaire (1/4 de l'espace) -->
                <div class="col-lg-3 col-md-4">
                    <!-- Statistiques -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="mb-3">Statistiques</h5>
                            <div class="stats-list">
                                <div class="stat-item" *ngIf="user?.pointagesCount !== undefined">
                                    <div class="stat-value">{{user?.pointagesCount || 0}}</div>
                                    <div class="stat-label">Pointages</div>
                                </div>
                                <div class="stat-item" *ngIf="user?.pointagesConfirmesCount !== undefined">
                                    <div class="stat-value">{{user?.pointagesConfirmesCount || 0}}</div>
                                    <div class="stat-label">Confirmés</div>
                                </div>
                                <div class="stat-item" *ngIf="user?.messagesEnvoyesCount !== undefined">
                                    <div class="stat-value">{{user?.messagesEnvoyesCount || 0}}</div>
                                    <div class="stat-label">Messages envoyés</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calendrier de présence -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Présence</h5>
                                <button class="btn btn-sm btn-outline-primary" (click)="openAttendanceModal()">
                                    Voir plus
                                </button>
                            </div>
                            <div class="attendance-calendar">
                                <div class="calendar-header">
                                    <span *ngFor="let day of ['L', 'M', 'M', 'J', 'V', 'S', 'D']">{{day}}</span>
                                </div>
                                <div class="calendar-days">
                                    <span *ngFor="let day of calendarDays"
                                          class="day"
                                          [class.present]="day.status === 'present'"
                                          [class.absent]="day.status === 'absent'"
                                          [class.partial]="day.status === 'partial'">
                                        {{day.day}}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</app-layout>

<!--<app-layout>-->
<!--    <div class="container-fluid p-0">-->
<!--        <app-navbar-->
<!--                pageTitle="Détails Utilisateur"-->
<!--                userName="Admin"-->
<!--                userRole="Administrateur"-->
<!--                userInitials="AD">-->
<!--        </app-navbar>-->

<!--        <div class="container py-4">-->
<!--            <div class="row">-->
<!--                &lt;!&ndash; Colonne principale (3/4 de l'espace) &ndash;&gt;-->
<!--                <div class="col-lg-9 col-md-8 mb-4">-->
<!--                    <div class="card shadow-sm h-100">-->
<!--                        <div class="card-body">-->
<!--                            &lt;!&ndash; En-tête avec boutons &ndash;&gt;-->
<!--                            <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between mb-4">-->
<!--                                <div class="d-flex align-items-center">-->
<!--                                    <div class="avatar me-3">-->
<!--                                        <span class="initials">{{getInitials(user?.firstName + ' ' + user?.lastName)}}</span>-->
<!--                                    </div>-->
<!--                                    <div>-->
<!--                                        <h2 class="mb-1">{{user?.firstName}} {{user?.lastName}}</h2>-->
<!--                                        <p class="text-muted mb-0">{{user?.role}} • {{user?.class}}</p>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="mt-2 mt-md-0">-->
<!--                                    <button class="btn btn-primary me-2" (click)="editUser()">-->
<!--                                        <i class="bi bi-pencil-square me-1"></i> Modifier-->
<!--                                    </button>-->
<!--                                    <button class="btn btn-outline-danger" (click)="deleteUser()">-->
<!--                                        <i class="bi bi-trash me-1"></i> Supprimer-->
<!--                                    </button>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            &lt;!&ndash; Informations de contact &ndash;&gt;-->
<!--                            <div class="row mb-4">-->
<!--                                <div class="col-md-6 mb-3">-->
<!--                                    <div class="card h-100">-->
<!--                                        <div class="card-body">-->
<!--                                            <h5 class="card-title">Informations de contact</h5>-->
<!--                                            <ul class="list-unstyled">-->
<!--                                                <li class="mb-2">-->
<!--                                                    <i class="bi bi-geo-alt-fill text-primary me-2"></i>-->
<!--                                                    {{user?.city}}, {{user?.country}}-->
<!--                                                </li>-->
<!--                                                <li class="mb-2">-->
<!--                                                    <i class="bi bi-telephone-fill text-primary me-2"></i>-->
<!--                                                    {{user?.phone}}-->
<!--                                                </li>-->
<!--                                                <li class="mb-2">-->
<!--                                                    <i class="bi bi-envelope-fill text-primary me-2"></i>-->
<!--                                                    {{user?.email}}-->
<!--                                                </li>-->
<!--                                                <li *ngIf="user?.parentName">-->
<!--                                                    <i class="bi bi-person-vcard-fill text-primary me-2"></i>-->
<!--                                                    Parent: {{user?.parentName}}-->
<!--                                                </li>-->
<!--                                            </ul>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="col-md-6">-->
<!--                                    <div class="card h-100">-->
<!--                                        <div class="card-body">-->
<!--                                            <h5 class="card-title">Informations générales</h5>-->
<!--                                            <ul class="list-unstyled">-->
<!--                                                <li class="mb-2">-->
<!--                                                    <i class="bi bi-calendar-event text-primary me-2"></i>-->
<!--                                                    <strong>Âge:</strong> {{user?.age}} ans-->
<!--                                                </li>-->
<!--                                                <li class="mb-2">-->
<!--                                                    <i class="bi bi-building text-primary me-2"></i>-->
<!--                                                    <strong>Organisation:</strong> {{user?.organization}}-->
<!--                                                </li>-->
<!--                                                <li class="mb-2">-->
<!--                                                    <i class="bi bi-calendar-plus text-primary me-2"></i>-->
<!--                                                    <strong>Date création:</strong> {{user?.dateCreated | date:'mediumDate'}}-->
<!--                                                </li>-->
<!--                                            </ul>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            &lt;!&ndash; Section À propos &ndash;&gt;-->
<!--                            <div class="card mb-4">-->
<!--                                <div class="card-body">-->
<!--                                    <h5 class="card-title">À propos</h5>-->
<!--                                    <p class="card-text">-->
<!--                                        {{user?.bio || 'Aucune biographie disponible.'}}-->
<!--                                    </p>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            &lt;!&ndash; Éducation et Expertise &ndash;&gt;-->
<!--                            <div class="row">-->
<!--                                <div class="col-md-6 mb-3 mb-md-0">-->
<!--                                    <div class="card h-100">-->
<!--                                        <div class="card-body">-->
<!--                                            <h5 class="card-title">Formation</h5>-->
<!--                                            <ul class="list-unstyled">-->
<!--                                                <li class="mb-3" *ngFor="let edu of user?.education">-->
<!--                                                    <h6 class="mb-1">{{edu.degree}}</h6>-->
<!--                                                    <p class="text-muted mb-0">{{edu.institution}} ({{edu.yearFrom}} - {{edu.yearTo}})</p>-->
<!--                                                </li>-->
<!--                                            </ul>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="col-md-6">-->
<!--                                    <div class="card h-100">-->
<!--                                        <div class="card-body">-->
<!--                                            <h5 class="card-title">Expertise</h5>-->
<!--                                            <div class="d-flex flex-wrap gap-2">-->
<!--                            <span class="badge bg-primary" *ngFor="let skill of user?.expertise">-->
<!--                              {{skill}}-->
<!--                            </span>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                &lt;!&ndash; Colonne secondaire (1/4 de l'espace) &ndash;&gt;-->
<!--                <div class="col-lg-3 col-md-4">-->
<!--                    &lt;!&ndash; Calendrier de présence &ndash;&gt;-->
<!--                    <div class="card mb-4">-->
<!--                        <div class="card-body">-->
<!--                            <div class="d-flex justify-content-between align-items-center mb-3">-->
<!--                                <h5 class="mb-0">Présence</h5>-->
<!--                                <button class="btn btn-sm btn-outline-primary" (click)="openAttendanceModal()">-->
<!--                                    Voir plus-->
<!--                                </button>-->
<!--                            </div>-->

<!--                            <div class="attendance-calendar">-->
<!--                                <div class="calendar-header">-->
<!--                                    <span *ngFor="let day of ['L', 'M', 'M', 'J', 'V', 'S', 'D']">{{day}}</span>-->
<!--                                </div>-->
<!--                                <div class="calendar-days">-->
<!--                      <span *ngFor="let day of calendarDays"-->
<!--                            class="day"-->
<!--                            [class.present]="day.status === 'present'"-->
<!--                            [class.absent]="day.status === 'absent'"-->
<!--                            [class.partial]="day.status === 'partial'">-->
<!--                        {{day.day}}-->
<!--                      </span>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Lieux de pointage &ndash;&gt;-->
<!--                    <div class="card">-->
<!--                        <div class="card-body">-->
<!--                            <h5 class="mb-3">Lieux de pointage</h5>-->
<!--                            <div class="locations-list">-->
<!--                                <div *ngFor="let location of user?.checkInLocations" class="location-item">-->
<!--                                    <div class="d-flex justify-content-between">-->
<!--                                        <div>-->
<!--                                            <strong>{{location.name}}</strong>-->
<!--                                            <div class="text-muted small">-->
<!--                                                Dernier pointage: {{location.lastCheckIn | date:'shortDate'}}-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <span class="badge"-->
<!--                                              [class.bg-success]="location.status === 'active'"-->
<!--                                              [class.bg-secondary]="location.status === 'inactive'">-->
<!--                          {{location.status === 'active' ? 'Actif' : 'Inactif'}}-->
<!--                        </span>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</app-layout>-->
